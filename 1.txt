import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Base64;

public class ReadBase64WriteByteArray {

  public static void main(String[] args) {
    try {
      // Read base64 data from 1.txt
      byte[] base64Data = readBase64FromFile("1.txt");

      // Decode the base64 data
      byte[] decodedByteArray = Base64.getDecoder().decode(base64Data);

      // Write decoded byte array to byte_array.txt
      writeByteArrayToFile(decodedByteArray, "byte_array.txt");

      System.out.println("Base64 data decoded and written to byte_array.txt successfully!");
    } catch (FileNotFoundException e) {
      System.err.println("Error: File '1.txt' not found.");
    } catch (IOException e) {
      System.err.println("An error occurred: " + e.getMessage());
    }
  }

  private static byte[] readBase64FromFile(String fileName) throws IOException {
    try (FileInputStream inputStream = new FileInputStream(fileName)) {
      // Read the entire file content into a byte array
      byte[] data = new byte[inputStream.available()];
      inputStream.read(data);
      return data;
    }
  }

  private static void writeByteArrayToFile(byte[] data, String fileName) throws IOException {
    try (FileOutputStream outputStream = new FileOutputStream(fileName)) {
      outputStream.write(data);
    }
  }
}
